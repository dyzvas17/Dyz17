<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Private Haven</title>
<style>
:root{
  --bg:#111; --card:#1c1c1c; --text:#fff; --accent:#ff4d6d; --glow:#ff4d6d; --bg-img:none;
}
body{
  margin:0; font-family:Arial,sans-serif; background:var(--bg); color:var(--text);
  background-image: var(--bg-img); background-size:cover; background-position:center;
  display:flex; justify-content:center; align-items:center; height:100vh; overflow:hidden;
  transition:0.5s;
}
.app{
  width:90%; max-width:420px; height:90vh; background:var(--card); border-radius:25px;
  padding:20px; display:flex; flex-direction:column; align-items:center; transition:0.5s; overflow:hidden;
}

/* Buttons */
button{border:none; cursor:pointer; transition:0.3s;}
.square-btn{
  width:140px; height:140px; margin:10px; border-radius:15px; font-size:18px;
  background:var(--accent); color:#fff; display:flex; justify-content:center; align-items:center;
  box-shadow:0 0 12px var(--glow); animation:pulse 2s infinite alternate;
}
.square-btn:hover{transform:scale(1.05);}
@keyframes pulse{from{box-shadow:0 0 10px var(--glow);} to{box-shadow:0 0 20px var(--glow);}}

.floating-theme{
  position:absolute; top:15px; right:15px; width:55px; height:55px; border-radius:12px;
  background:var(--accent); display:flex; justify-content:center; align-items:center; font-size:22px; color:#fff;
  box-shadow:0 0 12px var(--glow); cursor:pointer; animation:pulse 2s infinite alternate;
}

.big-btn{
  margin-top:15px; padding:14px 0; width:100%; border-radius:12px; font-size:18px;
  background:var(--accent); color:#fff; box-shadow:0 0 12px var(--glow); animation:pulse 2s infinite alternate;
}
.big-btn:hover{transform:scale(1.05);}
input{padding:14px; width:100%; border-radius:12px; border:none; margin-top:15px; font-size:16%;}

/* Memories */
.memories-container{flex:1; display:flex; flex-wrap:wrap; gap:10px; justify-content:center; overflow-y:auto; position:relative;}
.memories-container img{border-radius:12px; cursor:pointer; transition:0.3s;}
.memories-container img:hover{transform:scale(1.05); box-shadow:0 0 18px var(--glow);}

/* Polaroid */
.polaroid img{width:120px; height:120px; object-fit:cover; border:5px solid #fff; border-radius:10px; box-shadow:0 5px 15px rgba(0,0,0,0.5); transform: rotate(calc(-5deg + 10deg * var(--i)));}
.polaroid img:hover{transform:scale(1.05) rotate(calc(-3deg + 6deg * var(--i))); box-shadow:0 0 20px var(--glow);}

/* Circle style */
.circle img{border-radius:50%; width:100px; height:100px; object-fit:cover;}

/* Grid */
.grid img{width:100px; height:100px; object-fit:cover; border-radius:8px;}

/* Flip */
.flip-container{perspective:1000px; display:inline-block; margin:5px;}
.flip-card{width:120px; height:120px; transition:0.6s; transform-style:preserve-3d; cursor:pointer;}
.flip-card:hover{transform:rotateY(180deg) scale(1.05);}
.flip-card-front, .flip-card-back{position:absolute; width:120px; height:120px; backface-visibility:hidden; border-radius:12px;}
.flip-card-front{background-size:cover;}
.flip-card-back{background:var(--accent); color:#fff; display:flex; justify-content:center; align-items:center; transform:rotateY(180deg);}

/* Masonry */
.masonry{column-count:2; column-gap:10px;}
.masonry img{width:100%; border-radius:12px; margin-bottom:10px;}

/* Memories style switch button */
.mem-style-btn{
  position:absolute; top:10px; right:10px; width:45px; height:45px; border-radius:8px;
  background:var(--accent); color:#fff; display:flex; justify-content:center; align-items:center; font-size:20px;
  cursor:pointer; box-shadow:0 0 12px var(--glow); animation:pulse 2s infinite alternate;
}

/* Fullscreen */
.fullscreen-overlay{position:fixed;top:0;left:0;width:100vw;height:100vh; background:rgba(0,0,0,0.95);
display:flex; justify-content:center; align-items:center; z-index:200; opacity:0; pointer-events:none; transition:0.3s;}
.fullscreen-overlay.show{opacity:1; pointer-events:all;}
.fullscreen-overlay img{max-width:95%; max-height:90%; border-radius:12px; transition:transform 0.3s;}
.fullscreen-overlay button{position:absolute;top:20px; right:20px; font-size:22px; background:var(--accent); color:#fff; border-radius:8px; padding:8px 12px;}
</style>
</head>
<body>

<div class="app" id="app">
  <h2>Enter Password</h2>
  <input type="password" id="pw" placeholder="Only you know...">
  <button class="big-btn" onclick="unlock()">Unlock</button>
  <p id="msg"></p>
</div>

<div class="fullscreen-overlay" id="fsOverlay">
  <img id="fsImg" src="">
  <button onclick="closeFullScreen()">‚úï</button>
</div>

<script>
let currentMemoryStyle="polaroid";
const memories=["memory1.jpeg","memory2.jpeg","memory3.jpeg","memory4.jpeg","memory5.jpeg","memory6.jpeg"];

function unlock(){
  const pw=document.getElementById("pw").value;
  if(pw==="1234") loadHome();
  else document.getElementById("msg").innerText="Wrong password.";
}

function fadeSwitch(newContent){
  const app=document.getElementById("app");
  app.style.opacity=0;
  setTimeout(()=>{app.innerHTML=newContent; app.style.opacity=1; addUploadMemoryFeature();},300);
}

/* Home Screen */
function loadHome(){
  fadeSwitch(`
    <div class="floating-theme" onclick="themeMenu()">üé®</div>
    <div style="display:flex; flex-direction:column; align-items:center; margin-top:60px;">
      <button class="square-btn" onclick="showBirthday()">Birthday üéÇ</button>
      <button class="square-btn" onclick="showLetters()">Letters üíå</button>
      <button class="square-btn" onclick="showMemories()">Memories üì∏</button>
      <button class="square-btn" onclick="showUs()">Us ‚ù§Ô∏è</button>
    </div>
  `);
}

/* Birthday section with full screen card + particles + music + swipe */
function showBirthday() {
  fadeSwitch(`
    <div id="birthdayContainer" style="position:relative;width:100%;height:100%;overflow:hidden;">
      <canvas id="particleCanvas" style="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;"></canvas>
      <div id="birthdayCard" style="
          position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) scale(0);
          width:90%; height:90%; border-radius:25px; background:#ff4d6d; display:flex;
          justify-content:center; align-items:center; color:#fff; font-size:24px;
          text-align:center; box-shadow:0 0 30px #ff4d6d; opacity:0;
      ">
        üíå Happy Birthday! üíå<br>Swipe up to open your love letter
      </div>
      <audio id="birthdayAudio" src="birthday-song.mp3" autoplay></audio>
    </div>
  `);

  const card = document.getElementById('birthdayCard');
  const audio = document.getElementById('birthdayAudio');
  const canvas = document.getElementById('particleCanvas');
  const ctx = canvas.getContext('2d');
  canvas.width = canvas.offsetWidth;
  canvas.height = canvas.offsetHeight;

  const particles = [];
  for(let i=0;i<150;i++){
    particles.push({
      x: Math.random()*canvas.width,
      y: Math.random()*canvas.height,
      r: Math.random()*3+2,
      dx: (Math.random()-0.5)*2,
      dy: Math.random()*-2-1,
      alpha: Math.random()
    });
  }

  function drawParticles(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    particles.forEach(p=>{
      ctx.beginPath();
      ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
      ctx.fillStyle = `rgba(255,255,255,${p.alpha})`;
      ctx.fill();
      p.x += p.dx;
      p.y += p.dy;
      p.alpha -= 0.005;
      if(p.alpha <=0){ p.x=Math.random()*canvas.width; p.y=canvas.height; p.alpha=1; p.dx=(Math.random()-0.5)*2; p.dy=Math.random()*-2-1; }
    });
    requestAnimationFrame(drawParticles);
  }
  drawParticles();

  setTimeout(()=>{
    card.style.transition = "transform 1s ease, opacity 1s ease";
    card.style.transform = "translate(-50%,-50%) scale(1)";
    card.style.opacity = 1;
  }, 500);

  // Swipe gesture
  let startY=0, endY=0;
  card.addEventListener('touchstart', e=>{ startY = e.touches[0].clientY; });
  card.addEventListener('touchend', e=>{
    endY = e.changedTouches[0].clientY;
    if(startY - endY > 50){ // swipe up
      card.style.transition = "transform 0.8s ease, opacity 0.8s ease";
      card.style.transform = "translate(-50%,-150%) scale(1)";
      card.style.opacity = 0;
      setTimeout(()=>{ loadHome(); }, 900);
    }
  });
}

/* Letters / Us / Memories */
function showLetters(){ 
  fadeSwitch(`<button class='big-btn' onclick='loadHome()'>‚Üê Back</button><h2>Letters üíå</h2><div id="letter"></div>`); 
  const text="Dear love, this is our letters section, each word for you ‚ù§Ô∏è"; let i=0; const letterDiv=document.getElementById("letter");
  function typeWriter(){ if(i<text.length){letterDiv.innerHTML+=text.charAt(i); i++; setTimeout(typeWriter,50);} }
  typeWriter();
}
function showUs(){ fadeSwitch(`<button class='big-btn' onclick='loadHome()'>‚Üê Back</button><h2>Us ‚ù§Ô∏è</h2><p>All our special memories together in one place!</p>`);}
function showMemories(){ renderMemories(currentMemoryStyle); }

function renderMemories(style){
  let html=`<button class='big-btn' onclick='loadHome()'>‚Üê Back</button>
            <div class="memories-container ${style}">
            <div class="mem-style-btn" onclick="styleMenu()">‚ö°</div>
            <button id='uploadMemoryBtn'>+</button>
            <input type='file' id='uploadMemoryInput' style='display:none' accept='image/*'>`;

  if(style==="flip"){
    memories.forEach((src,i)=>{
      html+=`<div class="flip-container" onmousedown="openFullScreen('${src}')">
      <div class="flip-card">
        <div class="flip-card-front" style="background-image:url('${src}')"></div>
        <div class="flip-card-back">Memory ${i+1}</div>
      </div></div>`;
    });
  } else if(style==="masonry"){
    html+=`<div class="masonry">`;
    memories.forEach((src,i)=>{ html+=`<img src="${src}" alt="Memory ${i+1}" onmousedown="openFullScreen('${src}')">`; });
    html+=`</div>`;
  } else {
    memories.forEach((src,i)=>{ html+=`<img src="${src}" style="--i:${i}" alt="Memory ${i+1}" onmousedown="openFullScreen('${src}')">`; });
  }
  html+=`</div>`;
  fadeSwitch(html);
}

/* Memory style menu */
function styleMenu(){
  const overlay=document.createElement('div');
  overlay.style.cssText="position:absolute;top:60px;right:10px;background:rgba(0,0,0,0.8);padding:10px;border-radius:10px;display:flex;flex-direction:column;z-index:100;";
  ["polaroid","circle","grid","flip","masonry"].forEach(s=>{
    const b=document.createElement('button'); b.innerText=s.charAt(0).toUpperCase()+s.slice(1);
    b.onclick=()=>{currentMemoryStyle=s; renderMemories(s);}
    overlay.appendChild(b);
  });
  document.querySelector('.memories-container').appendChild(overlay);
}

/* Fullscreen */
function openFullScreen(src){
  const img=document.getElementById("fsImg");
  const overlay=document.getElementById("fsOverlay");
  img.src=src; overlay.classList.add("show"); img.style.transform="scale(0.8)";
  setTimeout(()=>{img.style.transform="scale(1)";},50);
}
function closeFullScreen(){ document.getElementById("fsOverlay").classList.remove("show"); }

/* Themes */
function themeMenu(){
  fadeSwitch(`<h3>Select Theme</h3>
    <button class="big-btn" onclick='setDark()'>Dark</button>
    <button class="big-btn" onclick='setSoft()'>Soft</button>
    <button class="big-btn" onclick='setClassic()'>Classic</button>
    <button class="big-btn" onclick='setNightwing()'>Nightwing</button>
    <button class="big-btn" onclick='setToji()'>Toji</button>
    <button class="big-btn" onclick='loadHome()'>‚Üê Back</button>`);
}
function setDark(){ document.documentElement.style.setProperty('--bg','#111'); document.documentElement.style.setProperty('--card','#1c1c1c'); document.documentElement.style.setProperty('--text','#fff'); document.documentElement.style.setProperty('--accent','#ff4d6d'); document.documentElement.style.setProperty('--glow','#ff4d6d'); document.documentElement.style.setProperty('--bg-img','none'); }
function setSoft(){ document.documentElement.style.setProperty('--bg','#ffeef2'); document.documentElement.style.setProperty('--card','#fff'); document.documentElement.style.setProperty('--text','#333'); document.documentElement.style.setProperty('--accent','#ff85a2'); document.documentElement.style.setProperty('--glow','#ff85a2'); document.documentElement.style.setProperty('--bg-img','none'); }
function setClassic(){ document.documentElement.style.setProperty('--bg','#fff'); document.documentElement.style.setProperty('--card','#f5f5f5'); document.documentElement.style.setProperty('--text','#000'); document.documentElement.style.setProperty('--accent','#000'); document.documentElement.style.setProperty('--glow','#000'); document.documentElement.style.setProperty('--bg-img','none'); }
function setNightwing(){ document.documentElement.style.setProperty('--bg','#0a0a0f'); document.documentElement.style.setProperty('--card','#11121a'); document.documentElement.style.setProperty('--text','#a8d0f0'); document.documentElement.style.setProperty('--accent','#1c8adb'); document.documentElement.style.setProperty('--glow','#1c8adb'); document.documentElement.style.setProperty('--bg-img','url("nightwing-bg.jpeg")'); }
function setToji(){ document.documentElement.style.setProperty('--bg','#000'); document.documentElement.style.setProperty('--card','#1a1a1a'); document.documentElement.style.setProperty('--text','#dcdfff'); document.documentElement.style.setProperty('--accent','#8a2be2'); document.documentElement.style.setProperty('--glow','#8a2be2'); document.documentElement.style.setProperty('--bg-img','url("toji-bg.jpeg")'); }

/* Upload memory feature */
function addUploadMemoryFeature(){
  const uploadBtn = document.getElementById('uploadMemoryBtn');
  const uploadInput = document.getElementById('uploadMemoryInput');
  const container = document.querySelector('.memories-container');
  if(!uploadBtn) return;

  uploadBtn.onclick = () => uploadInput.click();
  uploadInput.onchange = (e) => {
    const file = e.target.files[0]; if(!file) return;
    const reader = new FileReader();
    reader.onload = function(event){
      const newImgSrc = event.target.result;
      const img = document.createElement('img');
      img.src = newImgSrc;
      img.style.setProperty('--i', memories.length);
      img.onmousedown = () => openFullScreen(newImgSrc);
      container.appendChild(img);
      memories.push(newImgSrc);
    }
    reader.readAsDataURL(file);
  }
}
</script>

</body>
</html>function loadHome(){
  fadeSwitch(`
    <div class="floating-theme" onclick="themeMenu()">üé®</div>
    <div style="display:flex; flex-direction:column; align-items:center; margin-top:60px;">
      <button class="square-btn" onclick="showBirthday()">Birthday üéÇ</button>
      <button class="square-btn" onclick="showLetters()">Letters üíå</button>
      <button class="square-btn" onclick="showMemories()">Memories üì∏</button>
      <button class="square-btn" onclick="showUs()">Us ‚ù§Ô∏è</button>
    </div>
  `);
}

/* Birthday */
function showBirthday(){
  fadeSwitch(`<button class='big-btn' onclick='loadHome()'>‚Üê Back</button><h2>Birthday üéÇ</h2>`);
  playParticles();
  setTimeout(()=>{showCard(); document.getElementById('bdayMusic').play();},800);
}

function playParticles(){
  const container = document.getElementById('particles');
  container.innerHTML='';
  for(let i=0;i<60;i++){
    const p=document.createElement('div');
    p.style.position='absolute';
    p.style.width='8px';
    p.style.height='8px';
    p.style.background=['#ff4d6d','#fff','#ffdd00','#00ffe0'][Math.floor(Math.random()*4)];
    p.style.borderRadius='50%';
    p.style.top='50%';
    p.style.left='50%';
    p.style.opacity=1;
    p.style.transform=`translate(${Math.random()*200-100}px,${Math.random()*200-100}px)`;
    p.style.transition='all 1s ease-out';
    container.appendChild(p);
    setTimeout(()=>{p.style.top=Math.random()*100+'%'; p.style.left=Math.random()*100+'%'; p.style.opacity=0;},50);
  }
}

/* Show Birthday Card */
function showCard(){
  const card=document.getElementById('birthdayCard');
  card.style.transform='translate(-50%,-50%) scale(1)';
  card.classList.add('glow');

  let startX = 0;
  let currentX = 0;
  let swiping = false;

  card.addEventListener('pointerdown', (e)=>{
    startX = e.clientX;
    swiping=true;
  });
  card.addEventListener('pointermove', (e)=>{
    if(!swiping) return;
    currentX = e.clientX - startX;
    card.style.transform = `translate(calc(-50% + ${currentX}px), -50%) scale(1) rotate(${currentX/10}deg)`;
  });
  card.addEventListener('pointerup', ()=>{
    if(currentX>100){ card.classList.add('swipe'); setTimeout(()=>{card.style.display='none';},500);}
    else{ card.style.transform='translate(-50%,-50%) scale(1)';}
    swiping=false; currentX=0;
  });
}

/* Letters / Us */
function showLetters(){ 
  fadeSwitch(`<button class='big-btn' onclick='loadHome()'>‚Üê Back</button><h2>Letters üíå</h2><div id="letter"></div>`); 
  const text="Dear love, this is our letters section, each word for you ‚ù§Ô∏è"; let i=0; const letterDiv=document.getElementById("letter");
  function typeWriter(){ if(i<text.length){letterDiv.innerHTML+=text.charAt(i); i++; setTimeout(typeWriter,50);} }
  typeWriter();
}
function showUs(){ fadeSwitch(`<button class='big-btn' onclick='loadHome()'>‚Üê Back</button><h2>Us ‚ù§Ô∏è</h2><p>All our special memories together in one place!</p>`);}

/* Memories */
function showMemories(){ renderMemories(currentMemoryStyle); }

function renderMemories(style){
  let html=`<button class='big-btn' onclick='loadHome()'>‚Üê Back</button>
            <div class="memories-container ${style}">
            <div class="mem-style-btn" onclick="styleMenu()">‚ö°</div>`;
  if(style==="flip"){
    memories.forEach((src,i)=>{
      html+=`<div class="flip-container" onmousedown="openFullScreen('${src}')">
      <div class="flip-card">
        <div class="flip-card-front" style="background-image:url('${src}')"></div>
        <div class="flip-card-back">Memory ${i+1}</div>
      </div></div>`;
    });
  } else {
    memories.forEach((src,i)=>{ html+=`<img src="${src}" style="--i:${i}" alt="Memory ${i+1}" onmousedown="openFullScreen('${src}')">`; });
  }
  html+=`</div>`;
  fadeSwitch(html);
}

/* Fullscreen */
function openFullScreen(src){ const img=document.getElementById("fsImg"); const overlay=document.getElementById("fsOverlay"); img.src=src; overlay.classList.add("show"); img.style.transform="scale(0.8)"; setTimeout(()=>{img.style.transform="scale(1)";},50);}
function closeFullScreen(){ document.getElementById("fsOverlay").classList.remove("show"); }

/* Theme menu */
function themeMenu(){ fadeSwitch(`<h3>Select Theme</h3>
<button class="big-btn" onclick='setDark()'>Dark</button>
<button class="big-btn" onclick='setSoft()'>Soft</button>
<button class="big-btn" onclick='setClassic()'>Classic</button>
<button class="big-btn" onclick='setNightwing()'>Nightwing</button>
<button class="big-btn" onclick='setToji()'>Toji</button>
<button class="big-btn" onclick='loadHome()'>‚Üê Back</button>`); }

/* Themes */
function setDark(){ document.documentElement.style.setProperty('--bg','#111'); document.documentElement.style.setProperty('--card','#1c1c1c'); document.documentElement.style.setProperty('--text','#fff'); document.documentElement.style.setProperty('--accent','#ff4d6d'); document.documentElement.style.setProperty('--glow','#ff4d6d'); document.documentElement.style.setProperty('--bg-img','none'); }
function setSoft(){ document.documentElement.style.setProperty('--bg','#ffeef2'); document.documentElement.style.setProperty('--card','#fff'); document.documentElement.style.setProperty('--text','#333'); document.documentElement.style.setProperty('--accent','#ff85a2'); document.documentElement.style.setProperty('--glow','#ff85a2'); document.documentElement.style.setProperty('--bg-img','none'); }
function setClassic(){ document.documentElement.style.setProperty('--bg','#fff'); document.documentElement.style.setProperty('--card','#f5f5f5'); document.documentElement.style.setProperty('--text','#000'); document.documentElement.style.setProperty('--accent','#000'); document.documentElement.style.setProperty('--glow','#000'); document.documentElement.style.setProperty('--bg-img','none'); }
function setNightwing(){ document.documentElement.style.setProperty('--bg','#0a0a0f'); document.documentElement.style.setProperty('--card','#11121a'); document.documentElement.style.setProperty('--text','#a8d0f0'); document.documentElement.style.setProperty('--accent','#1c8adb'); document.documentElement.style.setProperty('--glow','#1c8adb'); document.documentElement.style.setProperty('--bg-img','url("nightwing-bg.jpeg")'); }
function setToji(){ document.documentElement.style.setProperty('--bg','#000'); document.documentElement.style.setProperty('--card','#1a1a1a'); document.documentElement.style.setProperty('--text','#dcdfff'); document.documentElement.style.setProperty('--accent','#8a2be2'); document.documentElement.style.setProperty('--glow','#8a2be2'); document.documentElement.style.setProperty('--bg-img','url("toji-bg.jpeg")'); }

</script>

</body>
</html>

